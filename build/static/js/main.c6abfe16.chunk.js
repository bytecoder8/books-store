(this["webpackJsonpbooks-store"]=this["webpackJsonpbooks-store"]||[]).push([[0],{29:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=n(11),l=n(2),u=n(9),s=n(10),m=n(17),d=n(18);function f(e){var t=e.error;return r.a.createElement("div",{className:"alert alert-danger error-message"},r.a.createElement("h4",{className:"alert-heading"},"Warning!"),r.a.createElement("p",{className:"mb-0"},t,". Try again later."))}f.defaultProps={error:"Something went wrong"};var E=f,b=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(s.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement(E,null):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.Component),v=n(12),p=n(27),h=n(14),O={loading:!1,books:[],error:""},T=function(e,t){if(void 0===e)return O;var n=t.type,a=t.payload;switch(n){case"FETCH_BOOKS_REQUEST":return Object(h.a)({},e.books,{loading:!0,error:""});case"FETCH_BOOKS_SUCCESS":return{books:a,loading:!1,error:""};case"FETCH_BOOKS_FAILURE":return Object(h.a)({},e.books,{error:a,loading:!1});default:return e.books}},_=n(23),y={items:[]},C=function(e,t){return t.books.books.find((function(t){return t.id===e}))},k=function(e,t){return function(n){return-1===t?n.concat(e):[].concat(Object(_.a)(n.slice(0,t)),[e],Object(_.a)(n.slice(t+1)))}},A=function(e){return function(t){return t.filter((function(t){return t.id!==e}))}},g=function(e,t){return function(n){var a=n.findIndex((function(t){return t.id===e.id}));if(a>=0){var r=n[a],o=r.count,c=r.total;if(o+t===0)return A(r.id)(n);var i=Object(h.a)({},r,{count:o+t,total:c+e.price*t});return k(i,a)(n)}return n}},N=function(e,t){if(void 0===e)return y;var n=t.type,a=t.payload,r=e.cart.items;switch(n){case"ADD_BOOK_TO_CART":var o=C(a,e),c=r.findIndex((function(e){return e.id===o.id})),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,a=void 0===n?e.id:n,r=t.title,o=void 0===r?e.title:r,c=t.count,i=void 0===c?0:c,l=t.total,u=void 0===l?0:l;return{id:a,title:o,count:i+1,total:u+e.price}}(o,r[c]);return{items:k(i,c)(r)};case"REMOVE_BOOK_FROM_CART":return{items:A(a)(r)};case"INCREASE_BOOK_COUNT_CART":return{items:g(C(a,e),1)(r)};case"DECREASE_BOOK_COUNT_CART":return{items:g(C(a,e),-1)(r)};default:return e.cart}},S={items:[]},R=function(e,t){if(void 0===e)return S;var n=t.type,a=t.payload,r=e.wishlist.items;switch(n){case"ADD_ITEM_TO_WISHLIST":var o=+a;return-1===r.indexOf(o)?{items:r.concat(o)}:{items:r};case"REMOVE_ITEM_FROM_WISHLIST":return{items:r.filter((function(e){return e!==+a}))};default:return e.wishlist}},I=function(e,t){return{books:T(e,t),cart:N(e,t),wishlist:R(e,t)}},j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.c,B=Object(v.d)(I,j(Object(v.a)(p.a))),w=function(){function e(){Object(u.a)(this,e),this.data=[{id:1,title:"JavaScript The Good Parts",author:"Douglas Crockford",price:15,imageUrl:"https://images-na.ssl-images-amazon.com/images/I/5131OWtQRaL._SX381_BO1,204,203,200_.jpg"},{id:2,title:"The Road to React",author:"Robin Wieruch",price:10,imageUrl:"https://m.media-amazon.com/images/I/31apmbgpwkL.jpg"},{id:3,title:"Eloquent JavaScript",author:"Marijn Haverbeke",price:12,imageUrl:"https://images-na.ssl-images-amazon.com/images/I/51-5ZXYtcML._SX377_BO1,204,203,200_.jpg"}]}return Object(s.a)(e,[{key:"getBooks",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){Math.random()<.9?t(e.data):n("Bookstore service error")}),200)}))}},{key:"getBook",value:function(e){return{id:e}}}]),e}(),L=r.a.createContext(),W=L.Provider,x=L.Consumer,D=(n(38),n(7));var M=Object(l.b)((function(e){return{count:e.cart.items.reduce((function(e,t){return e+t.count}),0)}}))((function(e){var t=e.count;return r.a.createElement("span",{className:"cartCounter"},"Cart (",t,")")})),K=[{to:"/",title:"Home",exact:!0},{to:"/wishlist",title:"WishList"},{to:"/cart",title:r.a.createElement(M,null)}];function U(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(i.b,{to:"/",exact:!0,className:"navbar-brand"},"BookStore"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor02"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},K.map((function(e){return r.a.createElement(i.b,{to:e.to,exact:e.exact,key:e.to,className:"nav-link"},e.title)})))))}n(40);var F=function(){return function(e){return function(t){return r.a.createElement(x,null,(function(n){return r.a.createElement(e,Object.assign({},t,{bookstoreService:n}))}))}}},H=function(e,t){return function(){t({type:"FETCH_BOOKS_REQUEST"}),e.getBooks().then((function(e){return t({type:"FETCH_BOOKS_SUCCESS",payload:e})})).catch((function(e){return t(function(e){return{type:"FETCH_BOOKS_FAILURE",payload:e}}(e))}))}},P=function(e){return{type:"ADD_BOOK_TO_CART",payload:e}};var V=function(e){var t=e.itemId,n=e.onAddToWishList;return Object(l.d)((function(e){return-1!==e.wishlist.items.indexOf(t)}))?r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary disabled"},"In Wishlist"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:n},"Wishlist")};var X=function(e){var t=e.itemId,n=e.onAddToCart;return Object(l.d)((function(e){return-1!==e.cart.items.findIndex((function(e){return e.id===t}))}))?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary disabled ml-2"},"In Cart"):r.a.createElement("button",{type:"button",className:"btn btn-primary ml-2",onClick:n},"Add to Cart")};function J(e){var t=e.book,n=e.onAddToCart,a=e.onAddToWishList,o=t.id,c=t.title,i=t.author;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},c),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},i),r.a.createElement("p",{className:"card-text"},"Book Description"),r.a.createElement(V,{itemId:o,onAddToWishList:a}),r.a.createElement(X,{itemId:o,onAddToCart:n})))}J.defaultProps={onAddToCart:function(){},onAddToWishList:function(){}};var Q=J;n(41);function z(){return r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}n(42);function $(e){var t=e.books,n=e.onAddToCart,a=e.onAddToWishList;return r.a.createElement("ul",{className:"book-list"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(Q,{book:e,onAddToCart:function(){return n(e.id)},onAddToWishList:function(){return a(e.id)}}))})))}var q=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.error,a=e.loading,o=e.onAddToCart,c=e.onAddToWishList;return a?r.a.createElement(z,null):n?r.a.createElement(E,{error:n}):r.a.createElement($,{books:t,onAddToCart:o,onAddToWishList:c})}}]),n}(a.Component);q.defaultProps={onAddToCart:function(){},onAddToWishList:function(){}};var G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(F(),Object(l.b)((function(e){return e.books}),(function(e,t){var n=t.bookstoreService;return{fetchBooks:H(n,e),onAddToCart:function(t){return e(P(t))},onAddToWishList:function(t){return e(function(e){return{type:"ADD_ITEM_TO_WISHLIST",payload:e}}(t))}}})))(q);var Y=function(e){return e.bookstoreService,r.a.createElement("div",null,r.a.createElement("h1",null,"Books"),r.a.createElement(G,null))};n(43);var Z={removeItem:function(e){return{type:"REMOVE_BOOK_FROM_CART",payload:e}},decrease:function(e){return{type:"DECREASE_BOOK_COUNT_CART",payload:e}},increase:function(e){return{type:"INCREASE_BOOK_COUNT_CART",payload:e}}},ee=Object(l.b)((function(e){return e.cart}),Z)((function(e){var t=e.items,n=e.removeItem,a=e.increase,o=e.decrease,c=t.reduce((function(e,t){return e+t.total}),0);return r.a.createElement("div",{className:"cart"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.map((function(e,t){var c=e.id,i=e.title,l=e.count,u=e.total;return r.a.createElement("tr",{key:c},r.a.createElement("td",null,t+1),r.a.createElement("td",null,i),r.a.createElement("td",null,l,r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm ml-1",onClick:function(){return a(c)}},"+"),r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm ml-1",onClick:function(){return o(c)}},"-")),r.a.createElement("td",null,"$",u),r.a.createElement("th",null,r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){return n(c)}},"Delete")))})))),r.a.createElement("div",{className:"total"},"Total: $",c))}));var te=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Cart"),r.a.createElement(ee,null))};function ne(e){var t=e.item,n=e.onRemove,a=e.onAddToCart,o=t.id,c=t.title,i=t.author;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},c),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},i),r.a.createElement("p",{className:"card-text"},"Book Description"),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm ml-2",onClick:n},"Remove"),r.a.createElement(X,{itemId:o,onAddToCart:a})))}ne.defaultProps={onRemove:function(){},onAddToCart:function(){}};var ae=ne;n(44);var re=function(){var e=Object(l.d)((function(e){var t=e.wishlist.items,n=e.books.books;return t.map((function(e){return n.find((function(t){return t.id===e}))}))})),t=Object(l.c)();return r.a.createElement("ul",{className:"wish-list"},e.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(ae,{item:e,onAddToCart:function(){return t(P(e.id))},onRemove:function(){return t({type:"REMOVE_ITEM_FROM_WISHLIST",payload:e.id})}}))})))};var oe=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"WishList"),r.a.createElement(re,null))};var ce=function(){return r.a.createElement("div",{className:"App container"},r.a.createElement(U,null),r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/",exact:!0,component:Y}),r.a.createElement(D.a,{path:"/wishlist",component:oe}),r.a.createElement(D.a,{path:"/cart",component:te})))},ie=new w;c.a.render(r.a.createElement(l.a,{store:B},r.a.createElement(b,null,r.a.createElement(W,{value:ie},r.a.createElement(i.a,null,r.a.createElement(ce,null))))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c6abfe16.chunk.js.map