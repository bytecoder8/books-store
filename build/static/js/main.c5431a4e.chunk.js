(this["webpackJsonpbooks-store"]=this["webpackJsonpbooks-store"]||[]).push([[0],{29:function(t,e,n){t.exports=n(45)},38:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(15),i=n.n(o),c=n(12),u=n(2),l=n(10),s=n(11),m=n(17),d=n(18);function f(t){var e=t.error;return r.a.createElement("div",{className:"alert alert-danger error-message"},r.a.createElement("h4",{className:"alert-heading"},"Warning!"),r.a.createElement("p",{className:"mb-0"},e,". Try again later."))}f.defaultProps={error:"Something went wrong"};var E=f,b=function(t){Object(d.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={hasError:!1},t}return Object(s.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement(E,null):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0}}}]),n}(a.Component),v=n(8),p=n(13),h=n(27),O={loading:!1,items:[],error:""},T=function(t,e){if(void 0===t||void 0===t.books)return O;var n=e.type,a=e.payload;switch(n){case"FETCH_BOOKS_REQUEST":return Object(v.a)({},t.books,{loading:!0,error:""});case"FETCH_BOOKS_SUCCESS":return{items:a,loading:!1,error:""};case"FETCH_BOOKS_FAILURE":return Object(v.a)({},t.books,{error:a,loading:!1});default:return t.books}},y=n(23),_={items:[]},C=function(t,e){return e.books.items.find((function(e){return e.id===t}))},k=function(t,e){return function(n){return-1===e?n.concat(t):[].concat(Object(y.a)(n.slice(0,e)),[t],Object(y.a)(n.slice(e+1)))}},g=function(t){return function(e){return e.filter((function(e){return e.id!==t}))}},A=function(t,e){return function(n){var a=n.findIndex((function(e){return e.id===t.id}));if(a>=0){var r=n[a],o=r.count,i=r.total;if(o+e===0)return g(r.id)(n);var c=Object(v.a)({},r,{count:o+e,total:i+t.price*e});return k(c,a)(n)}return n}},N=function(t,e){if(void 0===t||void 0===t.cart)return _;var n=e.type,a=e.payload,r=t.cart.items;switch(n){case"ADD_BOOK_TO_CART":var o=C(a,t),i=r.findIndex((function(t){return t.id===o.id})),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,a=void 0===n?t.id:n,r=e.title,o=void 0===r?t.title:r,i=e.count,c=void 0===i?0:i,u=e.total,l=void 0===u?0:u;return{id:a,title:o,count:c+1,total:l+t.price}}(o,r[i]);return{items:k(c,i)(r)};case"REMOVE_BOOK_FROM_CART":return{items:g(a)(r)};case"INCREASE_BOOK_COUNT_CART":return{items:A(C(a,t),1)(r)};case"DECREASE_BOOK_COUNT_CART":return{items:A(C(a,t),-1)(r)};default:return t.cart}},S={items:[]},I=function(t,e){if(void 0===t||void 0===t.wishlist)return S;var n=e.type,a=e.payload,r=t.wishlist.items;switch(n){case"ADD_ITEM_TO_WISHLIST":var o=+a;return-1===r.indexOf(o)?{items:r.concat(o)}:{items:r};case"REMOVE_ITEM_FROM_WISHLIST":return{items:r.filter((function(t){return t!==+a}))};default:return t.wishlist}},R=function(t,e){return{books:T(t,e),cart:N(t,e),wishlist:I(t,e)}},j=function(){try{var t=localStorage.getItem("bookstore-state");if(!t)return;return JSON.parse(t)}catch(e){}}(),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,w=Object(p.d)(R,j,B(Object(p.a)(h.a)));w.subscribe((function(){var t=w.getState(),e=t.cart,n=t.wishlist,a=t.books,r=[];e.items.forEach((function(t){return r.push(t.id)})),n.items.forEach((function(t){return r.push(t)})),r=r.filter((function(t,e){return r.indexOf(t)===e}));var o=a.items.filter((function(t){return-1!==r.indexOf(t.id)}));!function(t){try{var e=JSON.stringify(t);localStorage.setItem("bookstore-state",e)}catch(n){}}({cart:e,wishlist:n,books:Object(v.a)({},O,{items:o})})}));var L=w,W=function(){function t(){Object(l.a)(this,t),this.data=[{id:1,title:"JavaScript The Good Parts",author:"Douglas Crockford",price:15,imageUrl:"https://images-na.ssl-images-amazon.com/images/I/5131OWtQRaL._SX381_BO1,204,203,200_.jpg"},{id:2,title:"The Road to React",author:"Robin Wieruch",price:10,imageUrl:"https://m.media-amazon.com/images/I/31apmbgpwkL.jpg"},{id:3,title:"Eloquent JavaScript",author:"Marijn Haverbeke",price:12,imageUrl:"https://images-na.ssl-images-amazon.com/images/I/51-5ZXYtcML._SX377_BO1,204,203,200_.jpg"}]}return Object(s.a)(t,[{key:"getBooks",value:function(){var t=this;return new Promise((function(e,n){setTimeout((function(){Math.random()<.9?e(t.data):n("Bookstore service error")}),200)}))}},{key:"getBook",value:function(t){return{id:t}}}]),t}(),x=r.a.createContext(),D=x.Provider,M=x.Consumer,K=(n(38),n(7));var U=Object(u.b)((function(t){return{count:t.cart.items.reduce((function(t,e){return t+e.count}),0)}}))((function(t){var e=t.count;return r.a.createElement("span",{className:"cartCounter"},"Cart (",e,")")})),F=[{to:"/",title:"Home",exact:!0},{to:"/wishlist",title:"WishList"},{to:"/cart",title:r.a.createElement(U,null)}];function H(t){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(c.b,{to:"/",exact:!0,className:"navbar-brand"},"BookStore"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor02"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},F.map((function(t){return r.a.createElement(c.b,{to:t.to,exact:t.exact,key:t.to,className:"nav-link"},t.title)})))))}n(40);var P=function(){return function(t){return function(e){return r.a.createElement(M,null,(function(n){return r.a.createElement(t,Object.assign({},e,{bookstoreService:n}))}))}}},J=function(t,e){return function(){e({type:"FETCH_BOOKS_REQUEST"}),t.getBooks().then((function(t){return e({type:"FETCH_BOOKS_SUCCESS",payload:t})})).catch((function(t){return e(function(t){return{type:"FETCH_BOOKS_FAILURE",payload:t}}(t))}))}},V=function(t){return{type:"ADD_BOOK_TO_CART",payload:t}};var X=function(t){var e=t.itemId,n=t.onAddToWishList;return Object(u.d)((function(t){return-1!==t.wishlist.items.indexOf(e)}))?r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary disabled"},"In Wishlist"):r.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:n},"Wishlist")};var Q=function(t){var e=t.itemId,n=t.onAddToCart;return Object(u.d)((function(t){return-1!==t.cart.items.findIndex((function(t){return t.id===e}))}))?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary disabled ml-2"},"In Cart"):r.a.createElement("button",{type:"button",className:"btn btn-primary ml-2",onClick:n},"Add to Cart")};function z(t){var e=t.book,n=t.onAddToCart,a=t.onAddToWishList,o=e.id,i=e.title,c=e.author;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},i),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},c),r.a.createElement("p",{className:"card-text"},"Book Description"),r.a.createElement(X,{itemId:o,onAddToWishList:a}),r.a.createElement(Q,{itemId:o,onAddToCart:n})))}z.defaultProps={onAddToCart:function(){},onAddToWishList:function(){}};var $=z;n(41);function q(){return r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}n(42);function G(t){var e=t.books,n=t.onAddToCart,a=t.onAddToWishList;return r.a.createElement("ul",{className:"book-list"},e.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement($,{book:t,onAddToCart:function(){return n(t.id)},onAddToWishList:function(){return a(t.id)}}))})))}var Y=function(t){Object(d.a)(n,t);var e=Object(m.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"render",value:function(){var t=this.props,e=t.items,n=t.error,a=t.loading,o=t.onAddToCart,i=t.onAddToWishList;return a?r.a.createElement(q,null):n?r.a.createElement(E,{error:n}):r.a.createElement(G,{books:e,onAddToCart:o,onAddToWishList:i})}}]),n}(a.Component);Y.defaultProps={onAddToCart:function(){},onAddToWishList:function(){}};var Z=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}}(P(),Object(u.b)((function(t){return t.books}),(function(t,e){var n=e.bookstoreService;return{fetchBooks:J(n,t),onAddToCart:function(e){return t(V(e))},onAddToWishList:function(e){return t(function(t){return{type:"ADD_ITEM_TO_WISHLIST",payload:t}}(e))}}})))(Y);var tt=function(t){return t.bookstoreService,r.a.createElement("div",null,r.a.createElement("h1",null,"Books"),r.a.createElement(Z,null))};n(43);var et={removeItem:function(t){return{type:"REMOVE_BOOK_FROM_CART",payload:t}},decrease:function(t){return{type:"DECREASE_BOOK_COUNT_CART",payload:t}},increase:function(t){return{type:"INCREASE_BOOK_COUNT_CART",payload:t}}},nt=Object(u.b)((function(t){return t.cart}),et)((function(t){var e=t.items,n=t.removeItem,a=t.increase,o=t.decrease,i=e.reduce((function(t,e){return t+e.total}),0);return r.a.createElement("div",{className:"cart"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e.map((function(t,e){var i=t.id,c=t.title,u=t.count,l=t.total;return r.a.createElement("tr",{key:i},r.a.createElement("td",null,e+1),r.a.createElement("td",null,c),r.a.createElement("td",null,u,r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm ml-1",onClick:function(){return a(i)}},"+"),r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm ml-1",onClick:function(){return o(i)}},"-")),r.a.createElement("td",null,"$",l),r.a.createElement("th",null,r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){return n(i)}},"Delete")))})))),r.a.createElement("div",{className:"total"},"Total: $",i))}));var at=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Cart"),r.a.createElement(nt,null))};function rt(t){var e=t.item,n=t.onRemove,a=t.onAddToCart,o=e.id,i=e.title,c=e.author;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},i),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},c),r.a.createElement("p",{className:"card-text"},"Book Description"),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm ml-2",onClick:n},"Remove"),r.a.createElement(Q,{itemId:o,onAddToCart:a})))}rt.defaultProps={onRemove:function(){},onAddToCart:function(){}};var ot=rt;n(44);var it=function(){var t=Object(u.d)((function(t){var e=t.wishlist.items,n=t.books.items;return e.map((function(t){return n.find((function(e){return e.id===t}))}))})),e=Object(u.c)();return r.a.createElement("ul",{className:"wish-list"},t.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(ot,{item:t,onAddToCart:function(){return e(V(t.id))},onRemove:function(){return e({type:"REMOVE_ITEM_FROM_WISHLIST",payload:t.id})}}))})))};var ct=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"WishList"),r.a.createElement(it,null))};var ut=function(){return r.a.createElement("div",{className:"App container"},r.a.createElement(H,null),r.a.createElement(K.c,null,r.a.createElement(K.a,{path:"/",exact:!0,component:tt}),r.a.createElement(K.a,{path:"/wishlist",component:ct}),r.a.createElement(K.a,{path:"/cart",component:at})))},lt=new W;i.a.render(r.a.createElement(u.a,{store:L},r.a.createElement(b,null,r.a.createElement(D,{value:lt},r.a.createElement(c.a,{basename:"/books-store/build"},r.a.createElement(ut,null))))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c5431a4e.chunk.js.map